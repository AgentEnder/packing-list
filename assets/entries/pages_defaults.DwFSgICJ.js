import{j as e,l as _,m as Z,X as ee,M as te,p as M,I as D,q as ae,i as se,W as le,o as ne,L as re,a as oe,b as ie,c as de,d as ce}from"../chunks/chunk-CkW1dBBz.js";import{b as v,g as F,u as L,f as pe,h as ue,i as me,j as he,k as xe,e as ye,l as fe,m as be}from"../chunks/chunk-Bwb-TI-m.js";import{r as f}from"../chunks/chunk-pSdIku02.js";import{g as O,a as ge}from"../chunks/chunk-BMh89R92.js";import{P as T,a as S}from"../chunks/chunk-CIGAIrCQ.js";import{H as je}from"../chunks/chunk-pm1Kw1LK.js";import{N as ve}from"../chunks/chunk-CGX-a3s_.js";import{R as Ne}from"../chunks/chunk-BWj-pErp.js";import{F as Ce}from"../chunks/chunk-DhEZ9Pnn.js";/* empty css                      *//* empty css                      *//* empty css                      */function Pe({selectedCategoryId:t,selectedSubcategoryId:i,onCategoryChange:n,className:u="",testIdPrefix:c=""}){const[a]=f.useState(O()),[s,h]=f.useState([]);return f.useEffect(()=>{h(t?ge(t):[])},[t]),e.jsxs("div",{className:`space-y-4 ${u}`,children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Category"})}),e.jsxs("select",{className:"select select-bordered w-full",value:t,onChange:o=>{const r=o.target.value;n(r,void 0)},"data-testid":`${c}category-select`,children:[e.jsx("option",{value:"",children:"Select a category"}),a.filter(o=>!o.parentId).map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),s.length>0&&e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Subcategory (Optional)"})}),e.jsxs("select",{className:"select select-bordered w-full",value:i||"",onChange:o=>{const r=o.target.value||void 0;n(t,r)},"data-testid":`${c}subcategory-select`,children:[e.jsx("option",{value:"",children:"No subcategory"}),s.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]})]})}const we={type:"person",field:"age",operator:"==",value:0},E=(t=[])=>({type:"person",field:"name",operator:"in",value:t}),I=(t=0)=>({type:"person",field:"age",operator:"==",value:t}),De=(t="male")=>({type:"person",field:"gender",operator:"==",value:t}),$=(t="location")=>({type:"day",field:t,operator:"==",value:""}),Te=({initialCondition:t=we,onSave:i,onCancel:n,isEditing:u,testIdPrefix:c="create-rule-"})=>{const[a,s]=f.useState(t),h=v(F);f.useEffect(()=>{s(t)},[t]);const o=a.type==="person"?a.field==="name"?[{value:"in",label:"includes any of"}]:[{value:"==",label:"equals"},{value:">",label:"greater than"},{value:"<",label:"less than"},{value:">=",label:"greater than or equal"},{value:"<=",label:"less than or equal"}]:[{value:"==",label:"equals"},{value:">=",label:"after or on"},{value:"<=",label:"before or on"}];return e.jsxs("div",{className:"card bg-base-200 p-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"form-control flex-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Type"})}),e.jsxs("select",{className:"select select-bordered w-full",value:a.type,onChange:r=>{const m=r.target.value;s(m==="person"?I():$())},"data-testid":`${c}condition-type-select`,children:[e.jsx("option",{value:"person",children:"Person"}),e.jsx("option",{value:"day",children:"Day"})]})]}),e.jsxs("div",{className:"form-control flex-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Field"})}),e.jsx("select",{className:"select select-bordered w-full",value:a.field,onChange:r=>{if(a.type==="person"){const m=r.target.value;s(m==="gender"?De():m==="name"?E():I())}else{const m=r.target.value;s($(m))}},"data-testid":`${c}condition-field-select`,children:a.type==="person"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"age",children:"Age"}),e.jsx("option",{value:"gender",children:"Gender"}),e.jsx("option",{value:"name",children:"Name"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"location",children:"Location"}),e.jsx("option",{value:"expectedClimate",children:"Expected Climate"})]})})]}),e.jsxs("div",{className:"form-control flex-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Operator"})}),e.jsx("select",{className:"select select-bordered w-full",value:a.operator,onChange:r=>{if(a.field==="name")return;const m=r.target.value;s({...a,operator:m})},"data-testid":`${c}condition-operator-select`,disabled:a.field==="name",children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"form-control flex-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Value"})}),a.field==="gender"?e.jsxs("select",{className:"select select-bordered w-full",value:a.value,onChange:r=>s({...a,value:r.target.value}),"data-testid":`${c}condition-value-input`,children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}):a.field==="name"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Select people who need this item:"}),h.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No people added to this trip yet"}):e.jsx("div",{className:"space-y-1",children:h.map(r=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:a.value.includes(r.name),onChange:m=>{const x=a.value,d=m.target.checked?[...x,r.name]:x.filter(l=>l!==r.name);s(E(d))},"data-testid":`${c}condition-name-checkbox-${r.id}`}),e.jsx("span",{className:"text-sm",children:r.name})]},r.id))})]}):a.type==="person"?e.jsx("input",{type:"number",className:"input input-bordered w-full",value:a.value,onChange:r=>s({...a,value:parseInt(r.target.value)||0}),"data-testid":`${c}condition-value-input`}):e.jsx("input",{type:"text",className:"input input-bordered w-full",value:a.value,onChange:r=>{a.type==="day"&&s({...a,value:r.target.value})},"data-testid":`${c}condition-value-input`})]})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Notes (optional)"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",value:a.notes||"",onChange:r=>s({...a,notes:r.target.value}),placeholder:"Add a helpful note about this condition..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{type:"button",className:"btn",onClick:n,children:"Cancel"}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>i(a),"data-testid":`${c}condition-save-button`,children:[u?"Update":"Add"," Condition"]})]})]})},k={type:"person",field:"age",operator:"==",value:0},Se=({conditions:t=[],onConditionsChange:i,testIdPrefix:n=""})=>{const[u,c]=f.useState(!1),[a,s]=f.useState(null),[h,o]=f.useState(k),r=(d,l)=>{s(d),o(l),c(!0)},m=d=>{i(t.filter((l,y)=>y!==d))},x=()=>{c(!1),s(null),o(k)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"label",children:"Conditions"}),!u&&e.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:()=>c(!0),"data-testid":`${n}add-condition-button`,children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Add Condition"]})]}),e.jsx("div",{className:"space-y-2",children:t?.map((d,l)=>e.jsx("div",{className:"alert flex flex-col items-stretch gap-2","data-testid":`${n}condition-${l}`,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:`badge badge-outline gap-1 ${d.notes?"tooltip tooltip-right":""}`,children:[d.notes?e.jsx("div",{className:"tooltip-content",children:d.notes}):null,d.type==="person"?"ðŸ‘¤":"ðŸ“…"," ",d.field," ",d.operator," ",d.value]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-ghost btn-xs",onClick:()=>r(l,d),"data-testid":`${n}edit-condition-${l}-button`,children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",className:"btn btn-ghost btn-xs text-error",onClick:()=>m(l),"data-testid":`${n}remove-condition-${l}-button`,children:e.jsx(ee,{className:"h-4 w-4"})})]})]})},l))}),u&&e.jsx(Te,{initialCondition:h,onSave:d=>{i(a!==null?t.map((l,y)=>y===a?d:l):[...t,d]),x()},onCancel:x,isEditing:a!==null,testIdPrefix:n})]})},Ee=({perDay:t,perPerson:i,daysPattern:n,onPerDayChange:u,onPerPersonChange:c,onDaysPatternChange:a,testIdPrefix:s="",label:h})=>e.jsxs("div",{children:[h&&e.jsx("label",{className:"label",children:h}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox",checked:t,onChange:o=>u(o.target.checked),"data-testid":`${s}per-day-checkbox`}),e.jsx("span",{className:"label-text",children:"Per Day"})]}),t&&e.jsxs("div",{className:"ml-8",children:[e.jsxs("label",{className:"label cursor-pointer justify-start gap-2 tooltip tooltip-right","data-tip":"When enabled, items will be counted in groups of N days. For example, if set to 'Every 2 Days', you'd get 1 item for each 2-day period. ",children:[e.jsx("input",{type:"checkbox",className:"checkbox",checked:n!==void 0,onChange:o=>a(o.target.checked?{every:2,roundUp:!0}:void 0),"data-testid":`${s}every-n-days-checkbox`}),e.jsx("span",{className:"label-text",children:"Every N Days"})]}),n&&e.jsxs("div",{className:"form-control max-w-xs ml-8",children:[e.jsxs("label",{className:"label",children:[e.jsx("span",{className:"label-text",children:"Days"}),e.jsx("div",{className:"tooltip tooltip-right","data-tip":"The number of days to group together. Higher numbers mean fewer items overall since they're reused across more days.",children:e.jsx("div",{className:"cursor-help text-base-content/70",children:"?"})})]}),e.jsx("input",{type:"number",className:"input input-bordered max-w-xs",value:n.every,onChange:o=>a({every:parseInt(o.target.value)||1,roundUp:n.roundUp}),min:"1","data-testid":`${s}every-n-days-input`,"aria-label":"Number of days to group together"})]})]}),e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox",checked:i,onChange:o=>c(o.target.checked),"data-testid":`${s}per-person-checkbox`}),e.jsx("span",{className:"label-text",children:"Per Person"})]})]})]}),R=({quantity:t,perDay:i,perPerson:n,daysPattern:u,onQuantityChange:c,onPerDayChange:a,onPerPersonChange:s,onDaysPatternChange:h,label:o="Quantity",testIdPrefix:r="",className:m="",minQuantity:x=0,cardStyle:d=!1})=>{const l=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[!d&&e.jsx("label",{htmlFor:`${r}quantity`,className:"label",children:o}),e.jsx("input",{id:`${r}quantity`,type:"number",className:"input input-bordered w-full",value:t,onChange:y=>c(parseFloat(y.target.value)||x),min:x,step:1,"data-testid":`${r}quantity-input`,"aria-label":`${o} value`}),e.jsx(Ee,{perDay:i,perPerson:n,daysPattern:u,onPerDayChange:a,onPerPersonChange:s,onDaysPatternChange:h,testIdPrefix:r})]})});return d?e.jsx("div",{className:`space-y-6 ${m}`,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:`${r}quantity`,className:"label",children:o}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"card bg-base-200 p-4",role:"group","aria-label":`${o} settings`,children:e.jsx(l,{})})})]})}):e.jsx("div",{className:`space-y-6 ${m}`,children:e.jsx(l,{})})},Ie={baseQuantity:1,perDay:!1,perPerson:!1,extraItems:{quantity:1,perDay:!1,perPerson:!1}},$e=({calculation:t=Ie,onCalculationChange:i,testIdPrefix:n="",className:u=""})=>{const c=(s,h)=>{i({...t,extraItems:{...t.extraItems||{},quantity:Math.max(t.extraItems?.quantity||1,1),[h]:s,daysPattern:h==="perDay"&&!s?void 0:t.extraItems?.daysPattern}})},a=s=>{i({...t,extraItems:{...t.extraItems||{},quantity:Math.max(t.extraItems?.quantity||1,1),daysPattern:s}})};return e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 ${u}`,role:"group","aria-label":"Item quantity calculation",children:[e.jsx(R,{quantity:t.baseQuantity,perDay:t.perDay||!1,perPerson:t.perPerson||!1,daysPattern:t.daysPattern,onQuantityChange:s=>i({...t,baseQuantity:s}),onPerDayChange:s=>i({...t,perDay:s,daysPattern:s?t.daysPattern:void 0}),onPerPersonChange:s=>i({...t,perPerson:s}),onDaysPatternChange:s=>i({...t,daysPattern:s}),label:"Base Quantity",testIdPrefix:`${n}base-`,cardStyle:!0}),e.jsx(R,{quantity:t.extraItems?.quantity||0,perDay:t.extraItems?.perDay||!1,perPerson:t.extraItems?.perPerson||!1,daysPattern:t.extraItems?.daysPattern,onQuantityChange:s=>i({...t,extraItems:{...t.extraItems||{},quantity:s}}),onPerDayChange:s=>c(s,"perDay"),onPerPersonChange:s=>c(s,"perPerson"),onDaysPatternChange:a,label:"Extra Quantity",testIdPrefix:`${n}extra-`,minQuantity:0,cardStyle:!0})]})},P={baseQuantity:1,perDay:!1,perPerson:!1,extraItems:{quantity:0,perDay:!1,perPerson:!1}},z=({isOpen:t,onClose:i,rule:n})=>{const u=L(),c=!!n,[a,s]=f.useState(()=>({id:n?.id||"",name:n?.name||"",calculation:n?.calculation||P,categoryId:n?.categoryId||"",subcategoryId:n?.subcategoryId,notes:n?.notes,conditions:n?.conditions,originalRuleId:n?.originalRuleId||""})),[h,o]=f.useState(!1);f.useEffect(()=>{t&&s({id:n?.id||"",name:n?.name||"",calculation:n?.calculation||P,categoryId:n?.categoryId||"",subcategoryId:n?.subcategoryId,notes:n?.notes,conditions:n?.conditions,originalRuleId:n?.originalRuleId||""})},[n,t]);const r=f.useCallback(d=>{if(d.preventDefault(),!(!a.name||!a.categoryId)){if(c)u({type:"UPDATE_ITEM_RULE",payload:a});else{const l=pe();u({type:"CREATE_ITEM_RULE",payload:{...a,id:l,originalRuleId:l}})}i()}},[u,a,c,i]),m=()=>{s({id:"",name:"",calculation:P,categoryId:"",originalRuleId:""}),o(!1),i()},x=()=>{(c?JSON.stringify(a)!==JSON.stringify(n):a.name||a.categoryId||a.notes)?o(!0):i()};return t?e.jsxs(e.Fragment,{children:[e.jsx(te,{isOpen:t,onClose:x,title:c?"Edit Rule":"Create New Rule",size:"xl",modalBoxClassName:"max-w-4xl","data-testid":"rule-form-modal",ariaLabelledBy:"rule-form-modal-title",children:e.jsxs("form",{onSubmit:r,"aria-label":`${c?"Edit":"Create"} Rule Form`,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{htmlFor:"rule-form-name",className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Name"})}),e.jsx("input",{id:"rule-form-name",type:"text",className:"input input-bordered w-full",value:a.name,onChange:d=>s(l=>({...l,name:d.target.value})),placeholder:"Rule name","data-testid":"rule-form-name-input",required:!0,"aria-required":"true"})]}),e.jsx(Pe,{selectedCategoryId:a.categoryId,selectedSubcategoryId:a.subcategoryId,onCategoryChange:(d,l)=>s(y=>({...y,categoryId:d,subcategoryId:l})),testIdPrefix:"rule-form-"}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{htmlFor:"rule-form-notes",className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Notes (optional)"})}),e.jsx("textarea",{id:"rule-form-notes",className:"textarea textarea-bordered w-full h-24",value:a.notes||"",onChange:d=>s(l=>({...l,notes:d.target.value})),placeholder:"Add any helpful notes about this rule...","data-testid":"rule-form-notes-input","aria-label":"Rule description"})]}),e.jsx($e,{calculation:a.calculation,onCalculationChange:d=>s(l=>({...l,calculation:d})),testIdPrefix:"rule-form-"}),e.jsx("div",{className:"divider",role:"separator",children:"Conditions"}),e.jsx(Se,{conditions:a.conditions,onConditionsChange:d=>s(l=>({...l,conditions:d})),testIdPrefix:"rule-form-"})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{type:"button",className:"btn",onClick:x,"data-testid":"rule-form-cancel-button","aria-label":"Cancel",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!a.name||!a.categoryId,"data-testid":"rule-form-save-button","aria-disabled":!a.name||!a.categoryId,children:c?"Update Rule":"Create Rule"})]})]})}),e.jsx(M,{isOpen:h,onClose:()=>o(!1),title:"Discard Changes?",message:"Are you sure you want to discard your changes? This cannot be undone.",confirmText:"Discard",cancelText:"Cancel",confirmVariant:"error",onConfirm:m,"data-testid":"discard-rule-modal"})]}):null};function A(t,i){if(!t.perDay)return"";if(t.daysPattern){const n=i/t.daysPattern.every;return t.daysPattern.roundUp?`${Math.ceil(n)} ${t.daysPattern.every}-day periods`:`${Math.floor(n)} ${t.daysPattern.every}-day periods`}return`${i} days`}function U(t){return t.quantity>0||t.quantity&&!t.perPerson&&!t.perDay?t.quantity.toString():""}const ke=({baseCalculation:t,extraCalculation:i,peopleCount:n,daysCount:u})=>{const c=i?.quantity?["","+"]:null,a=[],s=U(t),h=i?U(i):"";(s||h)&&a.push([s,h]),(t.perPerson||i?.perPerson)&&n>1&&a.push([t.perPerson?`${n} people`:"",i?.perPerson?`${n} people`:""]),(t.perDay||i?.perDay)&&u>0&&a.push([t.perDay?A(t,u):"",i?.perDay?A(i,u):""]);const o=[[]];for(let r=0;r<a.length;r++){const m=a[r],x=a.slice(r+1),d=m[0],l=m[1],y=d&&d!=="Ã—"&&x.some(j=>j[0]),g=l&&l!=="Ã—"&&x.some(j=>j[1]);(y||g)&&a.splice(r+1,0,[y?"Ã—":"",g?"Ã—":""]),o[0].push(a[r][0])}if(i?.quantity){o.push([]);for(const r of a)o[1].push(r[1]);o[0]?.unshift(c?.[0]),o[1]?.unshift(c?.[1])}return e.jsx("div",{className:"grid items-center justify-end gap-x-1",style:{gridTemplateColumns:`repeat(${a.length+(c?1:0)}, auto)`,gridTemplateRows:`repeat(${o.length}, auto)`,rowGap:"0.125rem"},children:o.flatMap((r,m)=>r.map((x,d)=>e.jsx("div",{children:x},`${m}-${d}`)))})},q=t=>t.every===1?"every day":`every ${t.every} days${t.roundUp?" (rounded up)":""}`,Re=({rule:t,people:i,days:n})=>{const[u,c]=f.useState(!1),[a,s]=f.useState(!1),h=L(),o=ue(t,i,n),{baseQuantity:r,perDay:m,perPerson:x,daysPattern:d,extraItems:l}=t.calculation,y=me(i,t.conditions||[]),g=he(n,t.conditions||[]),j=O(),N=j.find(p=>p.id===t.categoryId),w=j.find(p=>p.id===t.subcategoryId),B=p=>{if(!p)return null;const b=D[p];return b?e.jsx(b,{className:"w-4 h-4"}):null},Q=v(p=>p.rulePacks),V=p=>{h({type:"OPEN_RULE_PACK_MODAL",payload:{tab:"details",packId:p}})},H=()=>{c(!0)},W=()=>{c(!1)},G=()=>{s(!0)},J=()=>{h({type:"DELETE_ITEM_RULE",payload:{id:t.id}}),s(!1)},K=()=>{s(!1)},C=t.packIds?Q.filter(p=>t.packIds?.some(b=>b.packId===p.id)).map(p=>{const b=p.icon?D[p.icon]:null;return e.jsxs("button",{className:"badge badge-sm gap-1 cursor-pointer",style:{backgroundColor:p.color,color:"white"},onClick:()=>V(p.id),children:[b&&e.jsx(b,{className:"w-3 h-3"}),p.name]},p.id)}):null,Y=l?xe(l.quantity,l.perPerson,l.perDay,l.daysPattern,y,g):0,X=(()=>{if(y===0||g===0)return!1;const p=x&&y>1||m&&g>1,b=l&&(l.perPerson&&y>1||l.perDay&&g>1);return p||b})();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2","data-testid":"rule-card",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"font-medium text-lg",children:t.name}),N&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-base-content/70",children:[N.icon&&B(N.icon),e.jsx("span",{children:N.name}),w&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-base-content/30",children:"â€¢"}),e.jsx("span",{children:w.name})]})]}),C&&C.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:C})]}),e.jsxs("div",{className:"flex flex-col items-end row-span-2",children:[e.jsxs("span",{className:"text-base-content/70",children:["Total: ",o]}),y===0||g===0?e.jsx("div",{className:"text-xs text-warning",children:y===0&&g===0?"No matching people or days":y===0?"No matching people":"No matching days"}):X&&e.jsx("div",{className:"hidden md:block text-xs text-base-content/50 mb-auto",children:e.jsx(ke,{baseCalculation:{quantity:r,perPerson:!!x,perDay:!!m,daysPattern:d},extraCalculation:l?.quantity&&Y>0?{quantity:l.quantity,perPerson:!!l.perPerson,perDay:!!l.perDay,daysPattern:l.daysPattern}:void 0,peopleCount:y,daysCount:g})})]}),e.jsxs("div",{className:"space-y-2 md:col-start-1 col-span-2 md:col-span-1","data-testid":"rule-calculation-description",children:[(x||m||l?.quantity)&&e.jsxs("p",{className:"text-base-content/70",children:[r,x?" per person":"",m&&!d?" per day":"",m&&d?` ${q(d)}`:"",l?.quantity?e.jsxs(e.Fragment,{children:[" + ",l.quantity," extra",l.perPerson?" per person":"",l.perDay&&!l.daysPattern?" per day":"",l.perDay&&l.daysPattern?` ${q(l.daysPattern)}`:""]}):null]}),t.notes&&e.jsxs("div",{className:"text-sm text-base-content/70 flex gap-2 items-start",children:[e.jsx(ae,{className:"stroke-base-content/50 shrink-0 w-4 h-4 mt-0.5"}),e.jsx("span",{children:t.notes})]}),t.conditions&&t.conditions.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Conditions:"}),e.jsx("div",{className:"space-y-1",children:t.conditions.map((p,b)=>e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("div",{className:`badge badge-outline gap-1 ${p.notes?"tooltip tooltip-right":""}`,"data-testid":`rule-condition-${b}`,children:[p.notes?e.jsx("div",{className:"tooltip-content",children:p.notes}):null,p.type==="person"?"ðŸ‘¤":"ðŸ“…"," ",p.field," ",p.operator," ",p.value]})},b))})]})]}),e.jsxs("div",{className:"col-span-2 flex justify-end gap-2",children:[e.jsx("button",{onClick:H,className:"btn btn-primary btn-sm","data-testid":"edit-rule-button",children:"Edit"}),e.jsx("button",{onClick:G,className:"btn btn-error btn-sm","data-testid":"delete-rule-button",children:"Delete"})]})]}),e.jsx(z,{isOpen:u,onClose:W,rule:t}),e.jsx(M,{isOpen:a,onClose:K,title:"Delete Rule?",message:`Are you sure you want to delete "${t.name}"? This cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",confirmVariant:"error",onConfirm:J,"data-testid":"delete-rule-confirm-modal"})]})},Ae=({rules:t,people:i,days:n})=>e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Existing Rules"}),e.jsxs("div",{className:"space-y-4","data-testid":"rules-list",children:[t.map(u=>e.jsx("div",{className:"card bg-base-200","data-testid":`rule-item-${u.id}`,children:e.jsx("div",{className:"card-body",children:e.jsx(Re,{rule:u,people:i,days:n})})},u.id)),t.length===0&&e.jsx("div",{className:"alert","data-testid":"no-rules-message",children:e.jsx("span",{children:"No rules added yet"})})]})]})});function Ue(){const t=v(ye),i=v(fe),n=v(F),u=v(be),[c,a]=f.useState(!1);return t?e.jsxs(T,{children:[e.jsx(S,{title:"Default Packing Rules"}),e.jsxs(je,{storageKey:"packing-rules",title:"How Default Rules Work",children:[e.jsx("p",{children:"Default packing rules help you automatically calculate how many items to pack based on your trip details. We've included some common items to get you started, like clothes and toiletries, but you can easily edit or remove these and add your own rules."}),e.jsx("h3",{className:"text-base mt-4 mb-2",children:"Available Rule Options"}),e.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-2 my-4",children:[e.jsx("dt",{className:"font-bold",children:"Base Quantity:"}),e.jsx("dd",{children:"The starting number of items"}),e.jsx("dt",{className:"font-bold",children:"Per Person:"}),e.jsx("dd",{children:"Multiply by the number of travelers"}),e.jsx("dt",{className:"font-bold",children:"Per Day:"}),e.jsx("dd",{children:"Multiply by the number of days"}),e.jsx("dt",{className:"font-bold",children:"Every N Days:"}),e.jsx("dd",{children:"Pack items for every N days (e.g., laundry supplies every 3 days)"}),e.jsx("dt",{className:"font-bold",children:"Extra Items:"}),e.jsx("dd",{children:"Add additional items with their own multipliers"}),e.jsx("dt",{className:"font-bold",children:"Conditions:"}),e.jsx("dd",{children:"Only apply the rule based on person traits (age, gender) or trip details (climate, activities)"})]}),e.jsxs("div",{className:"bg-base-200 rounded-lg p-4 my-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Example Calculation"}),e.jsxs("p",{className:"text-sm text-base-content/70 m-0",children:['For the rule "1 shirt per person every 2 days + 1 extra per person" with 4 people on a 7-day trip:',e.jsx("br",{}),"Base: (1 Ã— 4 people Ã— 4 two-day periods) = 16 shirts",e.jsx("br",{}),"Extra: (1 Ã— 4 people) = 4 shirts",e.jsx("br",{}),"Total: 20 shirts"]})]})]}),e.jsx(Ne,{className:"mb-8"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Rules"}),e.jsxs("button",{className:"btn btn-primary gap-2",onClick:()=>a(!0),"data-testid":"add-rule-button",children:[e.jsx(_,{className:"w-4 h-4"}),"Add Rule"]})]}),e.jsx(Ae,{rules:i,people:n,days:u}),e.jsx(Ce,{}),e.jsx(z,{isOpen:c,onClose:()=>a(!1)})]}):e.jsxs(T,{children:[e.jsx(S,{title:"Packing Rules"}),e.jsx(ve,{title:"No Trip Selected",message:"You need to select a trip before you can create packing rules. Rules help calculate the perfect quantity of items based on your trip duration and travelers.",actionText:"View My Trips",actionHref:"/trips"})]})}const qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),_e="Defaults - Packing List",Me=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),Ye={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:ce}},onHydrationEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onHydrationEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:de}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ie}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:oe}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/defaults/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:qe}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:re}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/defaults/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Me}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/onBeforeRenderClient",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:ne}]},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:le}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:se}}};export{Ye as configValuesSerialized};
