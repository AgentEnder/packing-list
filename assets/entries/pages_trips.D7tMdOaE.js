import{as as ne,at as re,j as e,k as D,au as ie,g as le,H as $,n as q,av as oe,h as W,f as C,l as H,E as de,aw as ce,ax as pe,Q as B,U as ue,ay as me,az as F,S as he,M as xe,i as ge,W as fe,o as be,L as De,a as ve,b as je,c as Se,d as we}from"../chunks/chunk-CkW1dBBz.js";import{r as S,a as Te}from"../chunks/chunk-pSdIku02.js";import{L as ye,J as G,U as I,u as Ne,b as R,n as Pe,f as Ie}from"../chunks/chunk-Bwb-TI-m.js";import{P as Me,a as Ce}from"../chunks/chunk-CIGAIrCQ.js";import{n as Ee,a as J,e as ke}from"../chunks/chunk-FfNSx1qK.js";import{i as $e}from"../chunks/chunk-Dn35YjOq.js";/* empty css                      *//* empty css                      *//* empty css                      */function Ue(d,c){const{start:i,end:m}=Ee(c?.in,d);let l=+i>+m;const x=l?+i:+m,s=l?m:i;s.setHours(0,0,0,0);let v=1;const j=[];for(;+s<=x;)j.push(ye(i,s)),s.setDate(s.getDate()+v),s.setHours(0,0,0,0);return l?j.reverse():j}function ze(d,c){const i=G(d,c?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function Ae(d,c){const i=ne(),m=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=G(d,c?.in),x=l.getDay(),s=(x<m?-7:0)+6-(x-m);return l.setDate(l.getDate()+s),l.setHours(23,59,59,999),l}function Oe(d,c,i){return J(d,-1,i)}function _e({trips:d,onTripClick:c,selectedTripId:i,onDateRangeSelect:m}){const[l,x]=S.useState(new Date),[s,v]=S.useState({startDate:null,endDate:null,isSelecting:!1}),[j,g]=S.useState(null),N=()=>{v({startDate:null,endDate:null,isSelecting:!1}),g(null)};S.useEffect(()=>{const t=n=>{n.key==="Escape"&&s.isSelecting&&N()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[s.isSelecting]);const U=ze(l),z=ke(l),E=re(U),k=Ae(z),A=Ue({start:E,end:k}),O=()=>{x(Oe(l))},_=()=>{x(J(l,1))},a=()=>{if(!s.isSelecting||!s.startDate)return null;const t=s.startDate,n=j||t,o=t<=n?t:n,p=t<=n?n:t;return{tripId:"preview",title:"New Trip",startDate:o,endDate:p,isPreview:!0}},u=(t=!1)=>{const n=t?a():null,p=(n?[...d,n]:d).slice().sort((b,w)=>{const T=new Date(b.startDate).getTime()-new Date(w.startDate).getTime();return T!==0?T:b.tripId.localeCompare(w.tripId)}),f=[];for(const b of p){const w=new Date(b.startDate),T=new Date(b.endDate),L=f.filter(P=>{const M=new Date(P.startDate),se=new Date(P.endDate);return w<=se&&T>=M}).map(P=>P.stablePosition);let y=0;for(;L.includes(y);)y++;f.push({...b,stablePosition:y})}return f},h=S.useMemo(()=>u(),[d]),V=S.useMemo(()=>s.isSelecting?u(!0):h,[h,s.isSelecting,s.startDate,j]),K=t=>V.filter(n=>{const o=new Date(n.startDate),p=new Date(n.endDate);return t>=o&&t<=p}),Q=(t,n)=>I(t,new Date(n.startDate)),Y=(t,n)=>I(t,new Date(n.endDate)),X=(t,n)=>{if(!n.target.closest("[data-trip-indicator]")&&m){if(!s.isSelecting)v({startDate:t,endDate:null,isSelecting:!0});else if(s.startDate&&!s.endDate){const o=s.startDate,p=t,f=o<=p?o:p,b=o<=p?p:o;v({startDate:null,endDate:null,isSelecting:!1}),g(null),m(f,b)}}},Z=t=>{if(!s.startDate)return!1;if(!s.endDate)return I(t,s.startDate);const n=s.startDate,o=s.endDate;return t>=n&&t<=o},ee=t=>s.startDate&&I(t,s.startDate),te=t=>s.endDate&&I(t,s.endDate),ae=t=>{if(!s.isSelecting||!s.startDate)return!1;const n=s.startDate,o=j||n,p=n<=o?n:o,f=n<=o?o:n;return t>=p&&t<=f};return e.jsxs("div",{className:"bg-base-100 rounded-lg shadow-lg border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:D(l,"MMMM yyyy")}),s.isSelecting&&e.jsx("p",{className:"text-sm text-base-content/70 mt-1",children:s.startDate?`Start: ${D(s.startDate,"MMM d")} - Click end date (ESC or right-click to cancel)`:"Click to select start date (ESC or right-click to cancel)"})]}),e.jsxs("div",{className:"flex gap-2",children:[s.isSelecting&&e.jsx("button",{onClick:N,className:"btn btn-ghost btn-sm",children:"Cancel"}),e.jsx("button",{onClick:O,className:"btn btn-ghost btn-sm btn-square","aria-label":"Previous month",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:_,className:"btn btn-ghost btn-sm btn-square","aria-label":"Next month",children:e.jsx(le,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-base-content/70",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:A.map(t=>{const n=K(t),o=$e(t,l),p=I(t,new Date),f=Z(t),b=ee(t),w=te(t),T=ae(t);return e.jsxs("div",{onClick:r=>X(t,r),onContextMenu:r=>{s.isSelecting&&(r.preventDefault(),N())},onMouseEnter:()=>s.isSelecting&&g(t),onMouseLeave:()=>s.isSelecting&&g(null),className:`
                min-h-[100px] p-1 border border-base-300 relative flex flex-col cursor-pointer transition-all
                ${o?"bg-base-100":"bg-base-200/30"}
                ${p?"ring-2 ring-primary ring-opacity-50":""}
                ${f?"bg-accent/20":""}
                ${b?"bg-accent/40 ring-2 ring-accent/50":""}
                ${w?"bg-accent/40 ring-2 ring-accent/50":""}
                ${T&&!f?"bg-accent/30 border-accent/50":""}
                ${m?"hover:bg-base-200/50":""}
              `,children:[e.jsx("div",{className:`
                text-sm mb-1 transition-all
                ${o?"text-base-content":"text-base-content/30"}
                ${p?"text-primary font-bold":""}
                ${b||w?"font-bold text-accent-content":"font-medium"}
                ${T&&!f?"font-semibold text-accent":""}
              `,children:D(t,"d")}),e.jsx("div",{className:"relative flex-1",children:n.map(r=>{const L=r.tripId===i,y=Q(t,r),P=Y(t,r);return e.jsx("div",{"data-trip-indicator":!0,onClick:M=>{M.stopPropagation(),r.isPreview?m?.(r.startDate,r.endDate):c?.(r.tripId)},onDoubleClick:M=>{M.stopPropagation(),q(Te("/packing-list",`/trips/${r.tripId}/settings`))},style:{position:"absolute",top:`${r.stablePosition*18}px`,left:0,right:0,height:"16px"},className:`
                        text-xs px-1 rounded transition-all flex items-center cursor-pointer
                        ${r.isPreview?"bg-accent/30 text-accent-content border-2 border-dashed border-accent/50 cursor-default":L?"bg-primary text-primary-content ring-2 ring-inset ring-primary/30":"bg-primary/50 text-primary-content hover:bg-primary/75"}
                        ${y?"rounded-l-md":"rounded-l-none"}
                        ${P?"rounded-r-md":"rounded-r-none"}
                      `,title:r.isPreview?`Preview: ${r.title} (${D(r.startDate,"MMM d")} - ${D(r.endDate,"MMM d")})`:`${r.title} (${D(r.startDate,"MMM d")} - ${D(r.endDate,"MMM d")})`,children:e.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[y&&e.jsx($,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate text-xs leading-none",children:y?r.title:""})]})},`${r.tripId}-${t.toISOString()}`)})})]},t.toISOString())})}),d.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-base-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:s.isSelecting?"Trips & Preview":"Visible trips"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:V.filter(t=>{const n=new Date(t.startDate),o=new Date(t.endDate);return n<=k&&o>=E}).map(t=>e.jsxs("div",{onClick:()=>!t.isPreview&&c?.(t.tripId),className:`
                    flex items-center gap-2 px-2 py-1 rounded text-xs transition-all
                    ${t.isPreview?"bg-accent/20 text-accent-content border border-dashed border-accent/50 cursor-default":`cursor-pointer ${t.tripId===i?"bg-primary text-primary-content":"bg-base-100 hover:bg-base-300"}`}
                  `,children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{children:t.title}),e.jsxs("span",{className:"text-xs opacity-70",children:[D(t.startDate,"MMM d")," -"," ",D(t.endDate,"MMM d")]})]},t.tripId))})]})]})}function Le(){const d=Ne(),c=R(Pe),i=R(a=>a.trips.selectedTripId),[m,l]=S.useState(!1),[x,s]=S.useState(null),[v,j]=S.useState("grid"),g=R(a=>a.trips.byId),N=a=>{d({type:"SELECT_TRIP",payload:{tripId:a}})},U=a=>{s(a),l(!0)},z=()=>{x&&(d({type:"DELETE_TRIP",payload:{tripId:x}}),l(!1),s(null))},E=a=>{const u=c.find(h=>h.tripId===a);if(u){const h=Ie();d({type:"CREATE_TRIP",payload:{tripId:h,title:`${u.title} (Copy)`,description:u.description}})}},k=a=>{a!==i&&N(a)},A=(a,u)=>{const h=new URLSearchParams({startDate:a.toISOString().split("T")[0],endDate:u.toISOString().split("T")[0]});q(`/trips/new?${h.toString()}`)},O=c.filter(a=>{const u=g[a.tripId];return u?.trip?.days&&u.trip.days.length>0}).map(a=>{const h=g[a.tripId].trip.days;return{tripId:a.tripId,title:a.title,startDate:new Date(h[0].date),endDate:new Date(h[h.length-1].date)}}),_=c.find(a=>a.tripId===x);return e.jsxs(Me,{children:[e.jsx(Ce,{title:"Trips",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"join",children:[e.jsxs("button",{onClick:()=>j("grid"),className:`btn btn-sm join-item ${v==="grid"?"btn-primary":"btn-ghost"}`,"data-testid":"grid-view-button",children:[e.jsx(oe,{className:"w-4 h-4"}),"Grid"]}),e.jsxs("button",{onClick:()=>j("calendar"),className:`btn btn-sm join-item ${v==="calendar"?"btn-primary":"btn-ghost"}`,"data-testid":"calendar-view-button",children:[e.jsx(W,{className:"w-4 h-4"}),"Calendar"]})]}),e.jsxs(C,{href:"/trips/new",className:"btn btn-primary gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"New Trip"]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-base-content/70",children:v==="grid"?"Manage all your packing trips":"View your trips on a calendar timeline"})}),c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{className:"w-16 h-16 mx-auto text-base-content/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No trips yet"}),e.jsx("p",{className:"text-base-content/70 mb-6",children:"Create your first trip to start planning your packing list"}),e.jsxs(C,{href:"/trips/new",className:"btn btn-primary gap-2","data-testid":"create-first-trip-link",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Your First Trip"]})]}):e.jsx(e.Fragment,{children:v==="calendar"?e.jsx(_e,{trips:O,onTripClick:k,selectedTripId:i||void 0,onDateRangeSelect:A}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:c.map(a=>e.jsx("div",{className:`card bg-base-100 shadow-lg border-2 transition-all hover:shadow-xl ${a.tripId===i?"border-primary ring-2 ring-primary/20":"border-transparent"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"card-title text-lg truncate",children:[a.title,a.tripId===i&&e.jsx("span",{className:"badge badge-primary badge-sm",children:"Current"})]}),a.description&&e.jsx("p",{className:"text-sm text-base-content/70 line-clamp-2 mt-1",children:a.description})]}),e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-sm btn-square","data-testid":`trip-menu-${a.tripId}`,children:e.jsx(de,{className:"w-4 h-4"})}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-48 p-2 shadow-lg border",children:[e.jsx("li",{children:e.jsxs(C,{href:`/trips/${a.tripId}/settings`,className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Edit"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>E(a.tripId),className:"flex items-center gap-2","data-testid":`duplicate-trip-${a.tripId}`,children:[e.jsx(pe,{className:"w-4 h-4"}),"Duplicate"]})}),e.jsx("div",{className:"divider my-1"}),e.jsx("li",{children:e.jsxs("button",{onClick:u=>{u.currentTarget.blur(),U(a.tripId)},className:"flex items-center gap-2 text-error","data-testid":`delete-trip-${a.tripId}`,children:[e.jsx(B,{className:"w-4 h-4"}),"Delete"]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"stat p-0",children:[e.jsx("div",{className:"stat-figure text-primary",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"stat-title text-xs",children:"People"}),e.jsx("div",{className:"stat-value text-lg",children:a.totalPeople})]}),e.jsxs("div",{className:"stat p-0",children:[e.jsx("div",{className:"stat-figure text-secondary",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsx("div",{className:"stat-title text-xs",children:"Packed"}),e.jsxs("div",{className:"stat-value text-lg",children:[a.packedItems,"/",a.totalItems]})]})]}),g[a.tripId].trip.days?.length&&e.jsxs("div",{className:"flex gap-2 w-fit",children:[e.jsx("div",{children:D(new Date(g[a.tripId].trip.days[0].date),"MMM d")}),e.jsx("div",{children:"-"}),e.jsx("div",{children:D(new Date(g[a.tripId].trip.days[g[a.tripId].trip.days.length-1].date),"MMM d")})]}),e.jsxs("div",{className:"text-xs text-base-content/60 mt-2",children:["Created ",F(a.createdAt),a.updatedAt!==a.createdAt&&e.jsxs("span",{children:[" • Updated ",F(a.updatedAt)]})]}),e.jsxs("div",{className:"card-actions justify-between mt-4",children:[a.tripId!==i?e.jsxs("button",{onClick:()=>N(a.tripId),className:"btn btn-primary btn-sm flex-1","data-testid":`select-trip-${a.tripId}`,children:[e.jsx($,{className:"w-4 h-4"}),"Switch to Trip"]}):e.jsxs(C,{href:"/",className:"btn btn-primary btn-sm flex-1","data-testid":`go-to-trip-${a.tripId}`,children:[e.jsx(W,{className:"w-4 h-4"}),"Go to Trip"]}),e.jsx(C,{href:`/trips/${a.tripId}/settings`,className:"btn btn-ghost btn-sm btn-square","data-testid":`trip-settings-${a.tripId}`,children:e.jsx(he,{className:"w-4 h-4"})})]})]})},a.tripId))})}),e.jsx(xe,{isOpen:m,onClose:()=>l(!1),title:"Delete Trip",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to delete “",_?.title,"”? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>l(!1),className:"btn btn-ghost",children:"Cancel"}),e.jsxs("button",{onClick:z,className:"btn btn-error","data-testid":"confirm-delete-trip",children:[e.jsx(B,{className:"w-4 h-4"}),"Delete Trip"]})]})]})})]})}const Re=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"})),Ve="Trips - Packing List",We=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"})),Xe={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:we}},onHydrationEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onHydrationEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Se}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:je}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ve}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/trips/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Re}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:De}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/trips/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:We}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/onBeforeRenderClient",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:be}]},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:fe}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:ge}}};export{Xe as configValuesSerialized};
