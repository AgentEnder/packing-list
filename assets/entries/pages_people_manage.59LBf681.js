import{j as e,h as E,X as k,K as z,u as B,N as _,A as L,O as S,B as D,l as C,Q as R,i as F,W as $,o as O,L as V,a as q,b as Y,c as H,d as M}from"../chunks/chunk-CkW1dBBz.js";import{r as h}from"../chunks/chunk-pSdIku02.js";import{u as A,t as G,B as P,f as I,x as W,b as T,C as K,v as Q,D as X,E as J,F as Z}from"../chunks/chunk-Bwb-TI-m.js";import{P as ee,a as te}from"../chunks/chunk-CIGAIrCQ.js";import{H as ae}from"../chunks/chunk-pm1Kw1LK.js";/* empty css                      *//* empty css                      *//* empty css                      */const se=["male","female","other","prefer-not-to-say"],le=({template:a,onCancel:c,onSave:r,prefillBirthDate:u,prefillName:b,prefillGender:f})=>{const n=A(),{user:m}=G(),[s,p]=h.useState(()=>({name:a?.name||b||"",birthDate:a?.birthDate||u||"",gender:a?.gender||f||"male",autoAddToNewTrips:a?.autoAddToNewTrips||!1})),[l,o]=h.useState(!1),g=s.birthDate?P(s.birthDate):void 0,d=t=>{const{name:i,value:x,type:w}=t.target,y=w==="checkbox"?t.target.checked:x;p(U=>({...U,[i]:y}))},j=async t=>{if(t.preventDefault(),!!s.name.trim()){o(!0);try{const i=m?.id||"local-user",x={id:a?.id||I(),userId:i,name:s.name.trim(),birthDate:s.birthDate||void 0,gender:s.gender,settings:a?.settings||{},isUserProfile:a?.isUserProfile||!1,autoAddToNewTrips:a?.isUserProfile?!0:s.autoAddToNewTrips,createdAt:a?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),version:(a?.version||0)+1,isDeleted:!1};n(W(x)),r?.(),c()}catch(i){console.error("Error saving template:",i)}finally{o(!1)}}},N=!!a,v=a?.isUserProfile;return e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",htmlFor:"template-name",children:e.jsx("span",{className:"label-text font-medium",children:"Name"})}),e.jsx("input",{id:"template-name",className:"input input-bordered w-full",name:"name",value:s.name,onChange:d,placeholder:"Enter name",required:!0,disabled:l,"data-testid":"template-name-input"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",htmlFor:"template-birthDate",children:e.jsxs("span",{className:"label-text font-medium flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Birth Date (optional)"]})}),e.jsx("input",{id:"template-birthDate",className:"input input-bordered w-full",name:"birthDate",type:"date",value:s.birthDate,onChange:d,disabled:l,"data-testid":"template-birthdate-input"}),g!==void 0&&e.jsx("div",{className:"label",children:e.jsxs("span",{className:"label-text-alt text-base-content/70",children:["Current age: ",g," years old"]})}),u&&e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text-alt text-warning",children:"ðŸ’¡ Birth date estimated from entered age. Please adjust if needed."})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",htmlFor:"template-gender",children:e.jsx("span",{className:"label-text font-medium",children:"Gender (optional)"})}),e.jsx("select",{id:"template-gender",className:"select select-bordered w-full",name:"gender",value:s.gender,onChange:d,disabled:l,"data-testid":"template-gender-select",children:se.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1).replace("-"," ")},t))})]}),!v&&e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-sm",name:"autoAddToNewTrips",checked:s.autoAddToNewTrips,onChange:d,disabled:l,"data-testid":"template-auto-add-checkbox"}),e.jsx("span",{className:"label-text",children:"Auto-add to new trips"})]}),e.jsx("div",{className:"text-xs text-base-content/70 ml-6",children:"Automatically add this template to new trips"})]}),e.jsxs("div",{className:"modal-action gap-2",children:[e.jsxs("button",{type:"button",onClick:c,className:"btn btn-ghost",disabled:l,"data-testid":"template-cancel-button",children:[e.jsx(k,{className:"w-4 h-4"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l||!s.name.trim(),"data-testid":"template-save-button",children:[l?e.jsx("span",{className:"loading loading-spinner loading-sm"}):e.jsx(z,{className:"w-4 h-4"}),N?"Update":"Save"," ",v?"Profile":"Template"]})]})]})};function re(){const a=A(),c=T(K),r=T(Q),u=T(X),b=T(J),f=B(),[n,m]=h.useState(null),[s,p]=h.useState(!1),[l,o]=h.useState(null);h.useEffect(()=>{const t=new URLSearchParams(f.urlParsed?.search||""),i=t.get("name"),x=t.get("gender"),w=t.get("birthDate"),y=t.get("source");i&&y==="person-form"&&(o({name:i,gender:x||void 0,birthDate:w||void 0,source:y}),p(!0),m(null),window.history.replaceState({},document.title,window.location.pathname))},[f.urlParsed?.search]);const g=t=>{confirm(`Delete template "${t.name}"? This cannot be undone.`)&&a(Z(t.id))},d=()=>{p(!0),m(null),o(null)},j=t=>{m(t),p(!1),o(null)},N=()=>{m(null),p(!1),o(null)},v=()=>{window.history.back()};return e.jsxs(ee,{children:[e.jsx(te,{title:"Manage People Templates",actions:e.jsxs("button",{onClick:v,className:"btn btn-ghost btn-sm",title:"Go back",children:[e.jsx(_,{className:"w-4 h-4"}),"Back"]})}),e.jsxs(ae,{storageKey:"templates",title:"Person Templates",children:[e.jsx("p",{children:"Templates let you save frequently traveled-with people for quick reuse across multiple trips. Your profile and templates are private to you."}),e.jsx("h3",{className:"text-base mt-4 mb-2",children:"Template Benefits"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Quickly add family members or frequent travel companions"}),e.jsx("li",{children:"Consistent personal details across all trips"}),e.jsx("li",{children:"No need to re-enter the same information"}),e.jsx("li",{children:"Templates update independently from trip people"})]}),e.jsxs("div",{className:"bg-base-200 rounded-lg p-4 my-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Profile vs Templates"}),e.jsxs("p",{className:"text-sm text-base-content/70 m-0",children:["Your ",e.jsx("strong",{children:"profile"})," represents you and is automatically added to new trips.",e.jsx("br",{}),e.jsx("strong",{children:"Templates"})," are for other people you travel with frequently."]})]})]}),b&&e.jsx("div",{className:"alert alert-error mb-4",children:e.jsxs("span",{children:["Error loading templates: ",b]})}),(s||n)&&e.jsxs("div",{className:"card bg-base-100 shadow-xl border-2 border-primary mb-8",children:[e.jsxs("div",{className:"card-header p-4 border-b border-base-300",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n?`Edit ${n.isUserProfile?"Profile":"Template"}: ${n.name}`:"Create New Template"}),l?.source==="person-form"&&e.jsx("p",{className:"text-sm text-base-content/70 mt-1",children:"Creating template from person form data. Birth date was estimated from age."})]}),e.jsx("div",{className:"card-body",children:e.jsx(le,{template:n||void 0,prefillBirthDate:l?.birthDate,prefillName:l?.name,prefillGender:l?.gender,onCancel:N,onSave:N})})]}),r&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Your Profile"]}),e.jsx("div",{className:"card bg-base-100 border border-primary/20",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.name}),e.jsx("div",{className:"text-sm text-base-content/70",children:[r.birthDate?`Age ${P(r.birthDate)}`:null,r.gender].filter(Boolean).join(" â€¢ ")||"No additional details"}),r.birthDate&&e.jsxs("div",{className:"text-xs text-base-content/50",children:["Born ",r.birthDate]}),e.jsx("span",{className:"badge badge-primary badge-sm mt-1",children:"Your Profile"})]}),e.jsx("button",{onClick:()=>j(r),className:"btn btn-sm btn-ghost",title:"Edit profile",children:e.jsx(S,{className:"w-4 h-4"})})]})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Templates (",c.length,")"]}),e.jsxs("button",{onClick:d,className:"btn btn-primary btn-sm",disabled:u,"data-testid":"add-template-button",children:[e.jsx(C,{className:"w-4 h-4"}),"Add Template"]})]}),u?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("span",{className:"loading loading-spinner loading-md"})}):c.length===0?e.jsx("div",{className:"card bg-base-100 border border-dashed border-base-300",children:e.jsxs("div",{className:"card-body text-center py-12",children:[e.jsx(D,{className:"w-12 h-12 mx-auto text-base-content/30 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Templates Yet"}),e.jsx("p",{className:"text-base-content/70 mb-4",children:"Create templates for people you travel with frequently."}),e.jsxs("button",{onClick:d,className:"btn btn-primary",children:[e.jsx(C,{className:"w-4 h-4"}),"Create Your First Template"]})]})}):e.jsx("div",{className:"grid gap-3",children:c.map(t=>e.jsx("div",{className:"card bg-base-100 border","data-testid":`template-card-${t.name.toLowerCase().replace(/\s+/g,"-")}`,children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("div",{className:"text-sm text-base-content/70",children:[t.birthDate?`Age ${P(t.birthDate)}`:null,t.gender].filter(Boolean).join(" â€¢ ")||"No additional details"}),t.birthDate&&e.jsxs("div",{className:"text-xs text-base-content/50",children:["Born ",t.birthDate]}),e.jsx("span",{className:"badge badge-outline badge-sm mt-1",children:"Template"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(t),className:"btn btn-sm btn-ghost",title:"Edit template","data-testid":`edit-template-${t.name.toLowerCase().replace(/\s+/g,"-")}-button`,children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(t),className:"btn btn-sm btn-ghost text-error hover:bg-error/10",title:"Delete template","data-testid":`delete-template-${t.name.toLowerCase().replace(/\s+/g,"-")}-button`,children:e.jsx(R,{className:"w-4 h-4"})})]})]})})},t.id))})]})]})}const ie=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),ne="Manage People - Packing List",oe=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),fe={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:M}},onHydrationEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onHydrationEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:H}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Y}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:q}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/people/manage/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ie}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:V}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/people/manage/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:oe}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/onBeforeRenderClient",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:O}]},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:$}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:F}}};export{fe as configValuesSerialized};
