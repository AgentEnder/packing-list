import{j as e,P as w,C as _,g as k,h as A,k as j,M,i as U,W as R,o as $,L as I,a as O,b as W,c as H,d as B}from"../chunks/chunk-CkW1dBBz.js";import{r as m}from"../chunks/chunk-pSdIku02.js";import{u as S,a as L,b as N,c as C,p as V,s as z,d as q,e as Y,f as F}from"../chunks/chunk-Bwb-TI-m.js";import{T as G}from"../chunks/chunk-BT0HdEIe.js";import{u as K}from"../chunks/chunk-l61yfe1d.js";import{i as J}from"../chunks/chunk-Dn35YjOq.js";import{P,a as E}from"../chunks/chunk-CIGAIrCQ.js";import{H as Q}from"../chunks/chunk-pm1Kw1LK.js";import{N as X}from"../chunks/chunk-CGX-a3s_.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-BWj-pErp.js";function Z({progress:t}){const l=18*Math.PI,h=l-t/100*l;return e.jsxs("svg",{width:20,height:20,children:[e.jsx("circle",{className:"stroke-base-300",fill:"none",strokeWidth:2,r:9,cx:20/2,cy:20/2}),e.jsx("circle",{className:`transition-all duration-300 ${t===100?"stroke-success/40":t>0?"stroke-primary/40":"stroke-base-300"}`,fill:"none",strokeWidth:2,strokeLinecap:"round",strokeDasharray:l,strokeDashoffset:h,r:9,cx:20/2,cy:20/2,transform:`rotate(-90 ${20/2} ${20/2})`})]})}function D({packingListItems:t,packingProgress:i}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"flex-1 h-1 bg-base-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 rounded-full ${i===100?"bg-success":i>0?"bg-primary":"bg-base-300"}`,style:{width:`${i}%`}})}),e.jsxs("div",{className:"text-xs tabular-nums text-base-content/60 min-w-[3ch]",children:[i,"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 min-w-[4ch]",children:[t.length," item",t.length!==1?"s":""]})]})}function ee(t){if(!t||t.length===0)return 0;const i=t.filter(r=>r.isPacked).length;return Math.round(i/t.length*100)}function te(t){switch(t.type){case"leave_home":return"Departing";case"arrive_home":return"Returning Home";case"leave_destination":return"Departing";case"arrive_destination":return"Arriving";default:return""}}function ae({index:t,dayLabel:i,location:r,expectedClimate:x,isTravel:l,events:h,packingListItems:n,onEventClick:f,onToggleItem:o}){const[s,c]=m.useState(!1),p=ee(n),g=i.toString().padStart(2,"0"),y=S(),u=m.useRef(p),b=m.useRef(null),{x:T,y:d}=K();return m.useEffect(()=>{p===100&&u.current<100&&y(L.triggerConfettiBurst({x:T,y:d})),u.current=p},[p,y]),e.jsxs("li",{ref:b,className:`flex flex-col ${l?"bg-base-200/50":""}`,children:[e.jsxs("div",{className:"flex items-start sm:items-center gap-2 sm:gap-4 p-2 sm:p-4 cursor-pointer hover:bg-base-200/50 transition-colors",onClick:()=>c(!s),"data-testid":`day-row-${t}`,children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-thin opacity-30 tabular-nums font-mono pt-1 sm:pt-0",children:g}),e.jsxs("div",{className:"flex items-start sm:items-center justify-center w-4 sm:w-6 pt-2 sm:pt-0",children:[e.jsxs("div",{className:"sm:hidden flex flex-col items-center gap-1",children:[n&&n.length>0&&e.jsx(Z,{progress:p}),l&&e.jsx(w,{className:"w-4 h-4 text-primary/60"})]}),l&&e.jsx(w,{className:`hidden sm:block w-4 h-4 ${n&&n.length>0?"text-primary":"text-primary/60"}`})]}),e.jsx("div",{className:"flex-1 min-h-[2.5rem] flex flex-col justify-center",children:h.length>0?e.jsx("div",{className:"space-y-2 w-full",children:h.map(a=>e.jsxs("button",{onClick:v=>{v.stopPropagation(),f?.(a)},className:"block w-full text-left text-sm hover:bg-base-200 rounded transition-colors","data-testid":`event-button-${a.type}-${t}`,children:[e.jsxs("div",{className:"font-medium",children:[te(a),a.type.includes("destination")&&a.location?` ${a.location}`:""]}),a.notes&&e.jsx("div",{className:"text-xs text-gray-500",children:a.notes})]},a.id))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium","data-testid":`day-location-${t}`,children:r}),e.jsx("div",{className:"text-xs uppercase font-semibold opacity-60",children:x})]})}),n&&n.length>0&&e.jsx("div",{className:"hidden sm:block min-w-[200px]",children:e.jsx(D,{packingListItems:n,packingProgress:p})}),e.jsx("div",{className:"flex items-center justify-center w-8",children:s?e.jsx(_,{className:"h-4 w-4"}):e.jsx(k,{className:"h-4 w-4"})})]}),s&&n&&n.length>0&&e.jsxs("div",{className:"px-8 pb-4",children:[e.jsx("div",{className:"sm:hidden mb-4",children:e.jsx(D,{packingListItems:n,packingProgress:p})}),e.jsx("div",{className:"divider my-2 hidden sm:flex"}),e.jsx("ul",{className:"space-y-2",children:n.map(a=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.isPacked,onChange:v=>{v.stopPropagation(),o?.(a.id)},className:"checkbox checkbox-sm"}),e.jsxs("span",{className:a.isPacked?"line-through opacity-50":"",children:[a.quantity>1&&e.jsxs("span",{className:"font-medium mr-2",children:[a.quantity,"×"]}),a.itemName]}),a.personName&&e.jsx("span",{className:"text-xs bg-base-200 px-2 py-0.5 rounded",children:a.personName})]},a.id))})]})]})}const se=C(z,q,(t,i)=>({days:t?.days||[],tripEvents:t?.tripEvents||[],packingListItems:i?.packingListItems||[]}));function re(t,i){const r=new Date(t);return i.every(l=>J(l,r))?j(r,"dd"):j(r,"MMM dd")}function ne({onEventClick:t}){const i=S(),{days:r,tripEvents:x,packingListItems:l}=N(se),h=o=>{i({type:"TOGGLE_ITEM_PACKED",payload:{itemId:o}})};if(r.length===0)return e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No trip days configured yet"});const n=m.useMemo(()=>r.map(o=>o.date),[r]),f=m.useMemo(()=>{const o=n.map(c=>new Date(c)),s=new Map;for(const c of r){const p=re(c.date,o);s.set(c.date,p)}return s},[r,n]);return e.jsxs("ul",{className:"list bg-base-100 rounded-box shadow-md",children:[e.jsxs("li",{className:"p-4 pb-2 text-xs opacity-60 tracking-wide flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Trip Schedule"]}),r.map((o,s)=>{const c=f.get(o.date);if(!c)throw new Error(`Day label not found for day ${o.date}`);const p=j(new Date(o.date),"yyyy-MM-dd"),g=x.filter(u=>j(V(u.date),"yyyy-MM-dd")===p),y=l?.filter(u=>u.dayIndex===s)||[];return e.jsx(ae,{index:s,dayLabel:c,date:o.date,location:o.location,expectedClimate:o.expectedClimate,isTravel:o.travel,events:g,packingListItems:y,onEventClick:t,onToggleItem:h},s)})]})}const ie=[{value:"leave_home",label:"Leave Home"},{value:"arrive_destination",label:"Arrive at Destination"},{value:"leave_destination",label:"Leave Destination"},{value:"arrive_home",label:"Arrive Home"}],oe=C(z,t=>t?.tripEvents||[]);function le(){const t=N(Y),i=S(),r=N(oe),[x,l]=m.useState(!1),[h,n]=m.useState(!1),[f,o]=m.useState(null),[s,c]=m.useState({id:"",type:"leave_home",date:"",location:"",notes:""});if(!t)return e.jsxs(P,{children:[e.jsx(E,{title:"Trip Days & Itinerary"}),e.jsx(X,{title:"No Trip Selected",message:"You need to select a trip before you can plan your itinerary. Each trip has its own timeline and destinations that help calculate the perfect packing list.",actionText:"View My Trips",actionHref:"/trips"})]});const p=()=>{c({id:"",type:"leave_home",date:"",location:"",notes:""}),o(null),l(!0)},g=d=>{c(d),o(d.id),l(!0)},y=()=>l(!1),u=d=>{c({...s,[d.target.name]:d.target.value})},b=d=>{if(d.preventDefault(),!s.type||!s.date||s.type!=="arrive_home"&&!s.location)return;let a=[...r];f?a=a.map(v=>v.id===f?{...s,id:f}:v):a.push({...s,id:F()}),i({type:"UPDATE_TRIP_EVENTS",payload:a}),l(!1)},T=d=>{i({type:"UPDATE_TRIP_EVENTS",payload:d})};return e.jsxs(P,{children:[e.jsx(E,{title:"Trip Schedule",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>n(!0),children:"Configure Trip"}),e.jsx("button",{className:"btn btn-outline btn-primary",onClick:p,children:"Add Event"})]})}),e.jsxs(Q,{storageKey:"trip-timeline",title:"Planning Your Trip",children:[e.jsx("p",{children:"Plan your trip schedule to help calculate the right amount of items to pack. Add key events to track your journey and automatically determine the trip duration."}),e.jsxs("div",{className:"bg-base-200 rounded-lg p-4 my-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"How It Works"}),e.jsxs("p",{className:"text-sm text-base-content/70 m-0",children:["Your trip schedule helps calculate packing needs:",e.jsx("br",{}),"• Total trip duration determines quantities for daily items",e.jsx("br",{}),"• Multiple destinations can affect what you need to pack",e.jsx("br",{}),"• Travel dates help plan for seasonal items"]})]})]}),e.jsx(G,{open:h,onClose:()=>n(!1),onSave:T,currentEvents:r}),e.jsx(M,{isOpen:x,onClose:y,title:"Add Event",children:e.jsxs("form",{onSubmit:b,className:"flex flex-col gap-3",children:[e.jsx("select",{className:"select select-bordered",name:"type",value:s.type,onChange:u,children:ie.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),e.jsx("input",{className:"input input-bordered",name:"date",type:"date",value:s.date,onChange:u,required:!0}),s.type!=="arrive_home"&&e.jsx("input",{className:"input input-bordered",name:"location",placeholder:"Location",value:s.location,onChange:u,required:!0}),e.jsx("textarea",{className:"textarea textarea-bordered",name:"notes",placeholder:"Notes (optional)",value:s.notes,onChange:u}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:f?"Update Event":"Add Event"})]})}),r.length>0?e.jsx("div",{className:"mb-6",children:e.jsx(ne,{onEventClick:g})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No trip configured yet"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>n(!0),children:"Configure Your Trip"})]})]})}const de=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),ce="Days - Packing List",pe=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"})),we={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:B}},onHydrationEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onHydrationEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:H}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:W}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:O}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/days/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:de}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:I}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/days/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:pe}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/onBeforeRenderClient",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:$}]},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-redux/__internal/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:R}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:U}}};export{we as configValuesSerialized};
