import{j as s,g as p,w as b,aF as j,aG as g,A as N,aH as v,aI as P,aJ as C,aK as f,aL as y,P as A,aM as R,aN as _,aO as w,ag as E,aa as L}from"./chunk-CkW1dBBz.js";import{u as O,b as l,l as T}from"./chunk-Bwb-TI-m.js";import"./chunk-pSdIku02.js";const S={sun:E,briefcase:w,tent:_,backpack:R,plane:A,car:y,train:f,ship:C,map:P,compass:v};function K({className:c,onRulesApplied:i}){const t=O(),o=l(e=>e.rulePacks),d=l(T),m=[...o].sort((e,a)=>a.stats.usageCount-e.stats.usageCount).slice(0,2),n=e=>d.some(a=>a.originalRuleId&&e.rules.some(r=>r.id===a.originalRuleId)),x=e=>{const a=n(e);t({type:"TOGGLE_RULE_PACK",pack:e,active:!a}),L(a?`Removed "${e.name}" rules`:`Added "${e.name}" rules`),i?.()},h=e=>{if(!e.icon)return null;const a=S[e.icon];return a?s.jsx(a,{className:"w-5 h-5"}):null};return s.jsxs("div",{className:c,children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Popular Rule Packs"}),s.jsxs("button",{className:"btn btn-ghost btn-sm gap-2",onClick:()=>t({type:"OPEN_RULE_PACK_MODAL"}),"data-testid":"view-all-packs-button",children:["View All",s.jsx(p,{className:"w-4 h-4"})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[m.map(e=>{const a=n(e),r=h(e);return s.jsx("div",{className:`card bg-base-100 shadow-xl ${a?"border-2 border-primary":""}`,style:{borderColor:a?void 0:e.color,borderWidth:"1px"},"data-testid":`rule-pack-${e.name}`,onClick:()=>{t({type:"OPEN_RULE_PACK_MODAL"}),t({type:"SET_SELECTED_RULE_PACK",pack:e}),t({type:"SET_RULE_PACK_MODAL_TAB",payload:{tab:"details",packId:e.id}})},children:s.jsxs("div",{className:"card-body p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("h3",{className:"card-title flex items-center gap-2 text-base",children:[r,e.name,a&&s.jsx(b,{className:"w-4 h-4 text-primary"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-base-content/70",children:[s.jsx(j,{className:"w-4 h-4"}),s.jsx("span",{children:e.stats.rating.toFixed(1)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-base-content/70",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.rules.length," rules"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(N,{className:"w-4 h-4"}),s.jsx("span",{children:e.author.name})]})]}),s.jsx("div",{className:"card-actions justify-end mt-auto",children:s.jsx("button",{className:`btn btn-sm ${a?"btn-outline btn-error":"btn-primary"}`,onClick:u=>{u.stopPropagation(),x(e)},"data-testid":`${a?"remove":"apply"}-pack-${e.name}-button`,children:a?"Remove":"Add Rules"})})]})},e.id)}),s.jsx("div",{className:"card bg-base-100 shadow-xl border border-base-300 cursor-pointer hover:shadow-2xl transition-shadow",onClick:()=>t({type:"OPEN_RULE_PACK_MODAL"}),"data-testid":"more-packs-card",children:s.jsxs("div",{className:"card-body items-center justify-center text-center p-4",children:[s.jsx("h3",{className:"card-title text-base mb-2",children:"Explore More Packs"}),s.jsx("p",{className:"text-sm text-base-content/70",children:"Browse and manage all available rule packs"})]})})]})]})}export{K as R};
